{"ast":null,"code":"import _regeneratorRuntime from\"/home/albert/Desktop/albert.com/the-complete-react/react-form/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/albert/Desktop/albert.com/the-complete-react/react-form/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/albert/Desktop/albert.com/the-complete-react/react-form/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var RestfulApi=function RestfulApi(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cities=_useState2[0],setCities=_useState2[1];var apiKey='fed230a6e88686';useEffect(function(){fetchCities();},[]);var fetchCities=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,cityName;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"https://ipinfo.io/json?token=\".concat(apiKey));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;// Extract the city name from the API response and set it in the state\ncityName=data.city||'';setCities([cityName]);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error('Error fetching data:',_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function fetchCities(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"City: \",cities[0]]}),/*#__PURE__*/_jsx(\"select\",{name:\"city\",id:\"city\",children:cities.map(function(city,index){return/*#__PURE__*/_jsx(\"option\",{value:city,children:city},index);})})]});};export default RestfulApi;","map":{"version":3,"names":["React","useState","useEffect","RestfulApi","cities","setCities","apiKey","fetchCities","fetch","response","json","data","cityName","city","console","error","map","index"],"sources":["/home/albert/Desktop/albert.com/the-complete-react/react-form/src/components/RestfulApi.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst RestfulApi = () => {\n  const [cities, setCities] = useState([]);\n  const apiKey = 'fed230a6e88686';\n\n  useEffect(() => {\n    fetchCities();\n  }, []);\n\n  const fetchCities = async () => {\n    try {\n      const response = await fetch(`https://ipinfo.io/json?token=${apiKey}`);\n      const data = await response.json();\n\n      // Extract the city name from the API response and set it in the state\n      const cityName = data.city || '';\n      setCities([cityName]);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  };\n\n  return (\n    <div>\n      <h2>City: {cities[0]}</h2>\n      <select name=\"city\" id=\"city\">\n        {cities.map((city, index) => (\n          <option key={index} value={city}>\n            {city}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n\nexport default RestfulApi;\n"],"mappings":"ycAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,C,wFAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvB,cAA4BF,QAAQ,CAAC,EAAD,CAApC,wCAAOG,MAAP,eAAeC,SAAf,eACA,GAAMC,OAAM,CAAG,gBAAf,CAEAJ,SAAS,CAAC,UAAM,CACdK,WAAW,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMA,YAAW,4FAAG,sMAEOC,MAAK,wCAAiCF,MAAjC,EAFZ,QAEVG,QAFU,qCAGGA,SAAQ,CAACC,IAAT,EAHH,QAGVC,IAHU,eAKhB;AACMC,QANU,CAMCD,IAAI,CAACE,IAAL,EAAa,EANd,CAOhBR,SAAS,CAAC,CAACO,QAAD,CAAD,CAAT,CAPgB,iFAShBE,OAAO,CAACC,KAAR,CAAc,sBAAd,cATgB,qEAAH,kBAAXR,YAAW,0CAAjB,CAaA,mBACE,oCACE,+BAAWH,MAAM,CAAC,CAAD,CAAjB,GADF,cAEE,eAAQ,IAAI,CAAC,MAAb,CAAoB,EAAE,CAAC,MAAvB,UACGA,MAAM,CAACY,GAAP,CAAW,SAACH,IAAD,CAAOI,KAAP,qBACV,eAAoB,KAAK,CAAEJ,IAA3B,UACGA,IADH,EAAaI,KAAb,CADU,EAAX,CADH,EAFF,GADF,CAYD,CAjCD,CAmCA,cAAed,WAAf"},"metadata":{},"sourceType":"module"}