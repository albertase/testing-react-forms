{"ast":null,"code":"import _regeneratorRuntime from\"/home/albert/Desktop/albert.com/the-complete-react/react-form/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/albert/Desktop/albert.com/the-complete-react/react-form/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/albert/Desktop/albert.com/the-complete-react/react-form/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import\"./Subscribe.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Subscribe=function Subscribe(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),fullName=_useState4[0],setFullName=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var payload,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// Perform form validation\nif(!(!email||!fullName)){_context.next=4;break;}alert(\"Please fill in all fields\");return _context.abrupt(\"return\");case 4:// Create a payload object with form data\npayload={email:email,full_name:'none'};_context.prev=5;_context.next=8;return fetch(\"/api/subscribe/add\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)});case 8:response=_context.sent;_context.next=11;return response.json();case 11:data=_context.sent;// Handle successful subscription\nconsole.log(\"Subscription successful:\",data);// Reset form fields\nsetEmail(\"\");setFullName(\"\");_context.next=21;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](5);// Handle subscription error\nconsole.error(\"Subscription error:\",_context.t0);alert(\"An error occurred while subscribing\");case 21:case\"end\":return _context.stop();}}},_callee,null,[[5,17]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"subscribe-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{className:\"subscribe-label\",htmlFor:\"email\",children:\"Subscribe\"}),/*#__PURE__*/_jsx(\"input\",{className:\"subscribe-input\",type:\"email\",id:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"fullName-label\",htmlFor:\"Full Name\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"fullName-input\",type:\"text\",id:\"fullname\",value:fullName,onChange:function onChange(e){return setFullName(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"subscribe-button\",type:\"submit\",children:\"Subscribe\"})})]})});};export default Subscribe;","map":{"version":3,"names":["React","useState","Subscribe","email","setEmail","fullName","setFullName","handleSubmit","e","preventDefault","alert","payload","full_name","fetch","method","headers","body","JSON","stringify","response","json","data","console","log","error","target","value"],"sources":["/home/albert/Desktop/albert.com/the-complete-react/react-form/src/components/Subscribe.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./Subscribe.css\";\n\nconst Subscribe = () => {\n  const [email, setEmail] = useState(\"\");\n  const [fullName, setFullName] = useState(\"\");\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // Perform form validation\n    if (!email || !fullName) {\n      alert(\"Please fill in all fields\");\n      return;\n    }\n\n    // Create a payload object with form data\n    const payload = {\n      email,\n      full_name: 'none',\n    };\n\n    try {\n      // Make a POST request to the endpoint\n      const response = await fetch(\n        \"/api/subscribe/add\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(payload),\n        }\n      );\n\n      const data = await response.json();\n\n      // Handle successful subscription\n      console.log(\"Subscription successful:\", data);\n\n      // Reset form fields\n      setEmail(\"\");\n      setFullName(\"\");\n    } catch (error) {\n      // Handle subscription error\n      console.error(\"Subscription error:\", error);\n      alert(\"An error occurred while subscribing\");\n    }\n  };\n\n  return (\n    <div className=\"subscribe-container\">\n      <form onSubmit={handleSubmit}>\n        <label className=\"subscribe-label\" htmlFor=\"email\">\n          Subscribe\n        </label>\n        <input\n          className=\"subscribe-input\"\n          type=\"email\"\n          id=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <div>\n          <label className=\"fullName-label\" htmlFor=\"Full Name\">\n            Full Name\n          </label>\n          <input\n            className=\"fullName-input\"\n            type=\"text\"\n            id=\"fullname\"\n            value={fullName}\n            onChange={(e) => setFullName(e.target.value)}\n          />\n        </div>\n        <div>\n          <button className=\"subscribe-button\" type=\"submit\">\n            Subscribe\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Subscribe;\n"],"mappings":"ycAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAO,iBAAP,C,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CACtB,cAA0BD,QAAQ,CAAC,EAAD,CAAlC,wCAAOE,KAAP,eAAcC,QAAd,eACA,eAAgCH,QAAQ,CAAC,EAAD,CAAxC,yCAAOI,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,aAAY,4FAAG,iBAAOC,CAAP,8IACnBA,CAAC,CAACC,cAAF,GAEA;AAHmB,KAIf,CAACN,KAAD,EAAU,CAACE,QAJI,0BAKjBK,KAAK,CAAC,2BAAD,CAAL,CALiB,wCASnB;AACMC,OAVa,CAUH,CACdR,KAAK,CAALA,KADc,CAEdS,SAAS,CAAE,MAFG,CAVG,uCAiBMC,MAAK,CAC1B,oBAD0B,CAE1B,CACEC,MAAM,CAAE,MADV,CAEEC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFX,CAKEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeP,OAAf,CALR,CAF0B,CAjBX,QAiBXQ,QAjBW,sCA4BEA,SAAQ,CAACC,IAAT,EA5BF,SA4BXC,IA5BW,eA8BjB;AACAC,OAAO,CAACC,GAAR,CAAY,0BAAZ,CAAwCF,IAAxC,EAEA;AACAjB,QAAQ,CAAC,EAAD,CAAR,CACAE,WAAW,CAAC,EAAD,CAAX,CAnCiB,iFAqCjB;AACAgB,OAAO,CAACE,KAAR,CAAc,qBAAd,cACAd,KAAK,CAAC,qCAAD,CAAL,CAvCiB,qEAAH,kBAAZH,aAAY,4CAAlB,CA2CA,mBACE,YAAK,SAAS,CAAC,qBAAf,uBACE,cAAM,QAAQ,CAAEA,YAAhB,wBACE,cAAO,SAAS,CAAC,iBAAjB,CAAmC,OAAO,CAAC,OAA3C,uBADF,cAIE,cACE,SAAS,CAAC,iBADZ,CAEE,IAAI,CAAC,OAFP,CAGE,EAAE,CAAC,OAHL,CAIE,KAAK,CAAEJ,KAJT,CAKE,QAAQ,CAAE,kBAACK,CAAD,QAAOJ,SAAQ,CAACI,CAAC,CAACiB,MAAF,CAASC,KAAV,CAAf,EALZ,EAJF,cAWE,oCACE,cAAO,SAAS,CAAC,gBAAjB,CAAkC,OAAO,CAAC,WAA1C,uBADF,cAIE,cACE,SAAS,CAAC,gBADZ,CAEE,IAAI,CAAC,MAFP,CAGE,EAAE,CAAC,UAHL,CAIE,KAAK,CAAErB,QAJT,CAKE,QAAQ,CAAE,kBAACG,CAAD,QAAOF,YAAW,CAACE,CAAC,CAACiB,MAAF,CAASC,KAAV,CAAlB,EALZ,EAJF,GAXF,cAuBE,kCACE,eAAQ,SAAS,CAAC,kBAAlB,CAAqC,IAAI,CAAC,QAA1C,uBADF,EAvBF,GADF,EADF,CAiCD,CAhFD,CAkFA,cAAexB,UAAf"},"metadata":{},"sourceType":"module"}